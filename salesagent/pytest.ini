[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options
addopts =
    -p pytest_mock
    -v
    --tb=short
    --strict-markers

# Markers
markers =
    smoke: Critical path tests that MUST always pass
    unit: Fast, isolated unit tests
    integration: Tests requiring database or services
    e2e: End-to-end tests with full system
    slow: Tests that take > 5 seconds
    ai: Tests requiring GEMINI_API_KEY
    gam: Tests requiring GAM credentials
    skip_ci: Skip in CI environment
    asyncio: Async test functions
    requires_db: Tests requiring a real database with tables
    requires_server: Tests requiring a running MCP server
    ui: Tests for UI template rendering and web interface

# Ignore patterns
norecursedirs = .git .venv tools scripts migrations

# Asyncio mode
asyncio_mode = auto
